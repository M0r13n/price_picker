{% extends "_base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% from "_macros.html" import render_repair with context %}
{% block page_title %}- Reparaturauswahl{% endblock %}
{% block content %}
    <h1 class="text-center">Wähle die gewünschte Reparatur</h1>
    <br>

    <div class="container">
        <div class="row">
            {% for repair in device.repairs %}
                {{ render_repair(repair) }}
            {% endfor %}
            <!-- Always include an arbitrary choice-->
            <div class="col-sm-4 py-2 text-center">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="my-0 font-weight-normal">Sonstige</h4>
                    </div>
                    <div class="card-body">
                        Preis auf Anfrage
                    </div>
                </div>
            </div>
            {% if current_user.is_authenticated %}
                <!-- Always include an add option if admin is logged in-->
                <div class="col-sm-4 py-2 text-center"
                     onclick="location.href='{{ url_for("admin.add_repair", device_id=device.id) }}'">
                    <div class="card bg-primary h-100">
                        <div class="card-body text-white align-items-center d-flex justify-content-center">
                            <h1>Neu</h1>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
        <br>
        <form class="form" role="form" method="post" action="{{ url_for('.summary') }}" id="repairSubmitForm">
            <div class="text-center">
                {{ form.repairs(hidden=True) }}
                <button class="btn btn-success" type="submit" id="repairSubmitBtn">Reparatur anfragen</button>
            </div>
        </form>
        <a class="btn btn-secondary" href="{{ url_for('main.select_device', manufacturer_id=device.manufacturer.id) }}">&laquo;
            Zurück</a>
    </div>
{% endblock %}
{% block js %}
    <script src="{{ url_for('static', filename='select_repair.js') }}" type="text/javascript"></script>
{% endblock %}