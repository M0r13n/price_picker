{% extends "_base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% from "_macros.html" import render_repair with context %}
{% from "_macros.html" import render_stepper %}

{% block page_title %}- Reparaturauswahl{% endblock %}
{% block content %}
    {{ render_stepper(2) }}

    <div class="container">
        <div class="row">
            {% for repair in device.repairs %}
                {{ render_repair(repair) }}
            {% endfor %}
            <!-- Always include an arbitrary choice-->
            <div class="col-sm-4 py-2 text-center">
                <div class="card h-100">
                    <div class="card-header">
                        <h4 class="my-0 font-weight-normal">Sonstige</h4>
                    </div>
                    <div class="card-body">
                        Preis auf Anfrage
                    </div>
                </div>
            </div>
            {% if current_user.is_authenticated %}
                <!-- Always include an add option if admin is logged in-->
                <div class="col-sm-4 py-2 text-center"
                     onclick="location.href='{{ url_for("admin.add_repair", device_id=device.id) }}'">
                    <div class="card bg-primary h-100">
                        <div class="card-body text-white align-items-center d-flex justify-content-center">
                            <h1>Neu</h1>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
        <br>
        <form class="form" role="form" method="post" action="{{ url_for('.summary', device_id=device.id) }}" id="repairSubmitForm">
            <div class="text-center">
                {{ form.hidden_tag() }}
                {{ form.repairs(hidden=True) }}
                <button class="btn btn-success" type="submit" id="repairSubmitBtn">Reparatur anfragen</button>
            </div>
        </form>
        <a class="btn btn-secondary" href="{{ url_for('main.select_device', manufacturer_id=device.manufacturer.id) }}">&laquo;
            Zurück</a>
    </div>


    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#colorChooserModal">
        Launch demo modal
    </button>

    <!-- Modal -->
    <div class="modal fade" id="colorChooserModal" tabindex="-1" role="dialog" aria-labelledby="colorChooserModalTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center" id="colorChooserModalTitle">Welche Farbe hat das Gerät?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>


{% endblock %}
{% block js %}
    <script src="{{ url_for('static', filename='select_repair.js') }}" type="text/javascript"></script>
{% endblock %}